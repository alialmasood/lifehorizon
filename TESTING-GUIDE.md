# ุฏููู ุงุฎุชุจุงุฑ ุจูุงุจุฉ ุงูุฏูุน ุฃุฑูุจุง

## ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงูุฏููู ููุถุญ ููููุฉ ุงุฎุชุจุงุฑ ุจูุงุจุฉ ุงูุฏูุน ุฃุฑูุจุง ูู ุงููุดุฑูุนุ ุณูุงุก ูู ุฎูุงู ุงููุงุฌูุฉ ุฃู ูุจุงุดุฑุฉ ุนุจุฑ API.

## ุงููููุงุช ุงููุทููุจุฉ

### 1. ุชุซุจูุช ุงูุชุจุนูุงุช
```bash
npm install
```

### 2. ุชุดุบูู ุงูุชุทุจูู
```bash
npm run dev
```

**ููุงุญุธุฉ:** ุงูุชุทุจูู ุณูุนูู ุนูู ุงูุจูุฑุช 3000 ุชููุงุฆูุงู
```
http://localhost:3000
```

## ุทุฑู ุงูุงุฎุชุจุงุฑ

### ุงูุทุฑููุฉ ุงูุฃููู: ุงุฎุชุจุงุฑ ุจูุงุจุฉ ุฃุฑูุจุง ูุจุงุดุฑุฉ

ูุฐุง ุงูุงุฎุชุจุงุฑ ูุฑุณู ุทูุจ ูุจุงุดุฑ ุฅูู ุจูุงุจุฉ ุฃุฑูุจุง ุจุฏูู ุงููุฑูุฑ ุจุงูุชุทุจูู:

```bash
npm run test-areeba
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
๐งช ุงุฎุชุจุงุฑ ุจูุงุจุฉ ุงูุฏูุน ุฃุฑูุจุง
==================================================
๐ ุจุฏุก ุงุฎุชุจุงุฑ ุทูุจ ุฃุฑูุจุง - ูุทุงุจู ูุชุนูููุงุช Postman...
๐ ุจูุงูุงุช ุงูุทูุจ: {
  "merchantTransactionId": "TXN1234567890",
  "amount": "1000",
  "currency": "USD",
  "successUrl": "http://localhost:3000/payment/success",
  "cancelUrl": "http://localhost:3000/payment/cancel",
  "errorUrl": "http://localhost:3000/payment/error",
  "callbackUrl": "http://localhost:3000/api/payment/callback",
  "customer": {
    "firstName": "Test",
    "lastName": "User",
    "email": "test@example.com",
    "company": "Life Horizon",
    "ipAddress": "127.0.0.1"
  },
  "language": "en"
}

๐ ุฑูุฒ ุงูุงุณุชุฌุงุจุฉ: 200
๐ ุงุณุชุฌุงุจุฉ ุฃุฑูุจุง: {
  "returnType": "REDIRECT",
  "redirectUrl": "https://gateway.areebapayment.com/redirect/...",
  "merchantTransactionId": "TXN1234567890",
  "uuid": "0c571fd3c105002a924f",
  "purchaseId": "purchase_123456"
}

โ ุชู ุฅูุดุงุก ุงููุนุงููุฉ ุจูุฌุงุญ!
๐ ุฑุงุจุท ุงูุชูุฌูู: https://gateway.areebapayment.com/redirect/...
๐ ูุนุฑู ุงููุนุงููุฉ: TXN1234567890
๐ UUID: 0c571fd3c105002a924f
๐ Purchase ID: purchase_123456
```

### ุงูุทุฑููุฉ ุงูุซุงููุฉ: ุงุฎุชุจุงุฑ API ุงููุญูู

ูุฐุง ุงูุงุฎุชุจุงุฑ ูุฎุชุจุฑ API ุงููุญูู ููุชุฃูุฏ ูู ุนููู:

```bash
npm run test-local
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
๐งช ุงุฎุชุจุงุฑ API ุงููุญูู
==================================================
๐ ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ: {
  "amount": 9.99,
  "customerEmail": "test@example.com",
  "customerName": "Test User",
  "gameId": "game_123",
  "gameTitle": "Test Game",
  "currency": "USD"
}

๐ ุฑูุฒ ุงูุงุณุชุฌุงุจุฉ: 200
๐ ุงุณุชุฌุงุจุฉ API ุงููุญูู: {
  "success": true,
  "redirectUrl": "https://gateway.areebapayment.com/redirect/...",
  "transactionId": "TXN1234567890",
  "amount": 9.99,
  "currency": "USD",
  "uuid": "0c571fd3c105002a924f",
  "purchaseId": "purchase_123456"
}

โ ุชู ุฅูุดุงุก ุงููุนุงููุฉ ุจูุฌุงุญ!
๐ ุฑุงุจุท ุงูุชูุฌูู: https://gateway.areebapayment.com/redirect/...
๐ ูุนุฑู ุงููุนุงููุฉ: TXN1234567890
๐ฐ ุงููุจูุบ: 9.99
๐ฑ ุงูุนููุฉ: USD
```

### ุงูุทุฑููุฉ ุงูุซุงูุซุฉ: ุงุฎุชุจุงุฑ ูู ุงููุงุฌูุฉ

1. **ุงูุชุญ ุงููุชุตูุญ:**
   ```
   http://localhost:3000
   ```

2. **ุงุฐูุจ ุฅูู ูุชุฌุฑ ุงูุฃูุนุงุจ:**
   ```
   http://localhost:3000/services/game-store
   ```

3. **ุงุถุบุท ุนูู "ุดุฑุงุก ุงูุขู" ูุฃู ูุนุจุฉ**

4. **ุณุชุชู ุชูุฌููู ูุจุงุดุฑุฉ ุฅูู ุตูุญุฉ ุงูุฏูุน**

5. **ูู ุตูุญุฉ ุงูุฏูุน:**
   - ุณุชุฌุฏ ุงูุจูุงูุงุช ููููุกุฉ ูุณุจูุงู ุจุจูุงูุงุช ุงูุจุทุงูุฉ ุงูุชุฌุฑูุจูุฉ
   - ููููู ุชุนุฏูููุง ุฃู ุงุณุชุฎุฏุงููุง ููุง ูู
   - ุงุถุบุท "ุฅุชูุงู ุงูุฏูุน"

6. **ุณุชุชู ุชูุฌููู ุฅูู ุจูุงุจุฉ ุงูุฏูุน ุฃุฑูุจุง**

7. **ุฃููู ุนูููุฉ ุงูุฏูุน ูู ุงูุจูุงุจุฉ**

8. **ุณุชุชู ุฅุนุงุฏุชู ุฅูู ุตูุญุฉ ุงููุฌุงุญ ุฃู ุงูุฎุทุฃ**

## ุจูุงูุงุช ุงูุจุทุงูุฉ ุงูุชุฌุฑูุจูุฉ

```json
{
  "cardNumber": "5123 4500 0000 0008",
  "expiryDate": "01/39",
  "securityCode": "123",
  "cardholderName": "test",
  "email": "test@example.com"
}
```

## ูุฑุงูุจุฉ ุงูุณุฌูุงุช

### ูุฑุงูุจุฉ console ุงูุชุทุจูู
```bash
# ูู terminal ุงูุชุทุจูู
npm run dev
```

### ูุฑุงูุจุฉ callback
ุนูุฏูุง ูุชู ุฅุชูุงู ุงูุฏูุนุ ุณุชุธูุฑ ุฑุณุงุฆู ูู console ูุซู:
```
ุงุณุชูุงู ุฅุดุนุงุฑ ุฏูุน ูู ุจูุงุจุฉ ุฃุฑูุจุง: { ... }
โ ุชู ุงูุฏูุน ุจูุฌุงุญ ูููุนุงููุฉ: TXN1234567890
Redirecting to SUCCESS: http://localhost:3000/payment/success?transactionId=TXN1234567890&amount=1000&currency=USD
```

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ ูู ุงุฎุชุจุงุฑ ุฃุฑูุจุง ุงููุจุงุดุฑ
```bash
# ุชุฃูุฏ ูู ุตุญุฉ ุงูุจูุงูุงุช
npm run test-areeba
```

**ุงูุฃุฎุทุงุก ุงููุญุชููุฉ:**
- `401 Unauthorized`: ุชุญูู ูู ุตุญุฉ ุจูุงูุงุช ุงููุตุงุฏูุฉ
- `400 Bad Request`: ุชุญูู ูู ุตุญุฉ JSON format
- `500 Internal Server Error`: ุชุญูู ูู ุตุญุฉ API Key

### ุฎุทุฃ ูู ุงุฎุชุจุงุฑ API ุงููุญูู
```bash
# ุชุฃูุฏ ูู ุชุดุบูู ุงูุชุทุจูู ุฃููุงู
npm run dev

# ุซู ุงุฎุชุจุฑ API
npm run test-local
```

**ุงูุฃุฎุทุงุก ุงููุญุชููุฉ:**
- `ECONNREFUSED`: ุชุฃูุฏ ูู ุชุดุบูู ุงูุชุทุจูู
- `404 Not Found`: ุชุญูู ูู ุตุญุฉ ูุณุงุฑ API
- `500 Internal Server Error`: ุชุญูู ูู logs ุงูุชุทุจูู

### ุฎุทุฃ ูู ุงููุงุฌูุฉ
1. **ุชุญูู ูู console ุงููุชุตูุญ (F12)**
2. **ุชุญูู ูู Network tab**
3. **ุชุญูู ูู console ุงูุชุทุจูู**

## ุงุฎุชุจุงุฑ Callback

### ูุญุงูุงุฉ callback ูุงุฌุญ
```bash
curl -X POST http://localhost:3000/api/payment/callback \
  -H "Content-Type: application/json" \
  -d '{
    "merchantTransactionId": "TXN1234567890",
    "status": "SUCCESS",
    "amount": "1000",
    "currency": "USD",
    "uuid": "0c571fd3c105002a924f",
    "purchaseId": "purchase_123456"
  }'
```

### ูุญุงูุงุฉ callback ูุงุดู
```bash
curl -X POST http://localhost:3000/api/payment/callback \
  -H "Content-Type: application/json" \
  -d '{
    "merchantTransactionId": "TXN1234567890",
    "status": "FAILED",
    "errorCode": "CARD_DECLINED",
    "errorMessage": "Card was declined"
  }'
```

## ุงููุชุงุฆุฌ ุงููุชููุนุฉ

### ูุฌุงุญ ุงูุฏูุน
- ุชูุฌูู ุฅูู: `/payment/success`
- ุนุฑุถ ุชูุงุตูู ุงููุนุงููุฉ
- ุฅููุงููุฉ ุชุญููู ุงููุนุจุฉ

### ูุดู ุงูุฏูุน
- ุชูุฌูู ุฅูู: `/payment/error`
- ุนุฑุถ ุฑุณุงูุฉ ุงูุฎุทุฃ
- ุฅููุงููุฉ ุฅุนุงุฏุฉ ุงููุญุงููุฉ

### ุฅูุบุงุก ุงูุฏูุน
- ุชูุฌูู ุฅูู: `/payment/cancel`
- ุนุฑุถ ุฑุณุงูุฉ ุงูุฅูุบุงุก
- ุฅููุงููุฉ ุงูุนูุฏุฉ ูููุชุฌุฑ

## ููุงุญุธุงุช ูููุฉ

1. **ุชุฃูุฏ ูู ุชุดุบูู ุงูุชุทุจูู ูุจู ุงูุงุฎุชุจุงุฑ**
2. **ุงุณุชุฎุฏู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ ููุท**
3. **ุฑุงูุจ console ููุชุฃูุฏ ูู ุนูู callback**
4. **ุชุญูู ูู ุตุญุฉ URLs ูู ุงูุฅูุชุงุฌ**
5. **ุงุฎุชุจุฑ ุฌููุน ุณููุงุฑูููุงุช ุงูุฏูุน (ูุฌุงุญุ ูุดูุ ุฅูุบุงุก)**

---

ยฉ 2024 Life Horizon - ุฌููุน ุงูุญููู ูุญููุธุฉ
